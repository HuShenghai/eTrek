apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'
apply plugin: 'org.greenrobot.greendao'

def config = rootProject.ext.android
def supportLibrary = rootProject.ext.supportDependencies
def thirdParty = rootProject.ext.thirdParty

android {

    compileSdkVersion config.compileSdkVersion
    buildToolsVersion config.buildToolsVersion

    signingConfigs {
        key_release {
            keyAlias 'bottle_release'
            keyPassword 'bottle123456'
            storePassword 'bottle123456'
            storeFile rootProject.file('bottle_release.jks')
        }

        key_debug {
            keyAlias 'bottle'
            keyPassword 'bottle0618'
            storePassword 'bottle0618'
            storeFile rootProject.file('debug.keystore.jks')
        }
    }

    defaultConfig {
        applicationId "com.bottle.track"
        minSdkVersion config.minSdkVersion
        targetSdkVersion config.targetSdkVersion
        versionCode 1
        versionName "0.5.0.1"
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
        multiDexEnabled true
        ndk {
            abiFilters 'armeabi', 'armeabi-v7a', 'arm64-v8a', 'x86'
        }
    }

    buildTypes {

        release {
            signingConfig signingConfigs.key_release
            minifyEnabled false
            // proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }

        debug {
            signingConfig signingConfigs.key_debug
            minifyEnabled false
            // proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    lintOptions {
        abortOnError true
    }

    sourceSets {
        main.java.srcDirs += 'build/generated/source/greendao'
    }
}

greendao {
    schemaVersion 1
    daoPackage 'com.bottle.track.db.gen'
}

dependencies {
    implementation 'com.android.support.constraint:constraint-layout:1.0.2'
    compile project(':util')
    compile fileTree(include: ['*.jar'], dir: 'libs')
    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {
        exclude group: 'com.android.support', module: 'support-annotations'
    })
    testCompile thirdParty.junit
    compile supportLibrary.supportAppcompatV7
    compile supportLibrary.design
    compile supportLibrary.supportV4
    compile supportLibrary.constraintLayout
    compile supportLibrary.cardView
    compile thirdParty.bugly
    compile thirdParty.buglyNative
    compile thirdParty.logger
    compile thirdParty.timber
    compile thirdParty.fastJson
    compile thirdParty.rxAndroid
    compile thirdParty.rxJava
    compile thirdParty.rxJavaAdapter
    compile thirdParty.retrofit
    compile thirdParty.okHttp
    compile thirdParty.gsonConverter
    compile thirdParty.greenDao
    compile thirdParty.eventBus
    compile thirdParty.amap3D
    compile thirdParty.amapLocation
    compile thirdParty.amapSearch
    compile thirdParty.recyclerviewAnimators

    compile "org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version"
    implementation files('libs/libthrift-0.10.0.jar')
    implementation files('libs/mid-sdk-3.73.jar')
    implementation files('libs/mta-android-sdk-3.2.1.jar')
    implementation files('libs/open_sdk_r5923_lite.jar')
    implementation files('libs/slf4j-api-1.7.24.jar')
    implementation files('libs/track-sdk_v3.2.1.jar')
}
